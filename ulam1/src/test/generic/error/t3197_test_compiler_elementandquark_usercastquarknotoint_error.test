## -*- mode:ulam -*-
#=t3197_test_compiler_elementandquark_usercastquarknotoint_error
#!
./Foo.ulam:13:12: ERROR: (2) <toInt> is not a defined function, or cannot be safely called in this context.
./Foo.ulam:13:12: ERROR: Cannot cast erroneous type.
./Foo.ulam:13:12: ERROR: Unresolved No.1: <.>.
./Foo.ulam:13:12: ERROR: Unresolved No.2: <toInt>.
./Foo.ulam:11:3: Warning: 2 nodes with unresolved types remain in function <test> (Uf_4test,3).
./Foo.ulam:11:7: Warning: Summary: 2 nodes with unresolved types remain in  a single function <test> in class: Foo.
./Foo.ulam:3:9: Warning: 2 data member nodes with unresolved types remain in class 'Foo'.
./Foo.ulam:3:9: ERROR: 2 Nodes with unresolved types detected after type labeling class: Foo.
Unrecoverable Program Type Label FAILURE.
##
#>Foo.ulam
  ulam 1;
use Bar;
element Foo {
  Unary(4) m_i;
  Bar m_bar;
  Bar check(Int v) {
    Bar b;
    b.val_b[1] = true;
    return b;
  }
  Int test() {
    m_bar = check(1);
    m_i = (Unary(4)) m_bar;
    return m_i;
  }
}

#:Bar.ulam
  ulam 1;
quark Bar {
  Bool val_b[3];
  Void reset(Bool b) {
    b = false;
  }
  /*Int toInt(){
    return 7;
    }*/
}
#.
