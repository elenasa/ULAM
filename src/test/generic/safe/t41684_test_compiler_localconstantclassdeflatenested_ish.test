## -*- mode:ulam -*-
#=t41684_test_compiler_localconstantclassdeflatenested_ish
#!
Exit status: 4
Ue_A { Int(4) m_iou(4);  Int test() {  constant Int(4) c_qbar = 4;  { constant QBar c_qbar = { .r = { 3 cast, 2 cast, 0 cast }, .sp = true, .iou = 4 };  self m_iou . c_qbar iou . = } self m_iou . cast return } }
Uq_QBar { Bool sp(false);  Unary(3) r[5]( { 1u });  Int(4) iou( 7);  <NOMAIN> }
##
## informed by Dave ish 9/14/24; see also t41678 and t41198
##
#>A.ulam
  ulam 5;

element A {
  Int(4) m_iou = 0;
  Int test() {
    constant Int(4) c_qbar = 4;
    {
      constant QBar c_qbar = { .r = {3, 2, 0}, .sp = true, .iou = c_qbar };
      m_iou = c_qbar.iou;
    }
    return m_iou;
  }
}


#:QBar.ulam
  ulam 3;
quark QBar {
  Bool sp;
  Unary(3) r[5] = {1};
  Int(4) iou = 7;
}

#.
